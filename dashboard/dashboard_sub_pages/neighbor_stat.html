<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="icon" href="../../img/logos/3.ico">

    <title>Dashboard</title>

    <!-- Bootstrap core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="../../css/dashboard.css" rel="stylesheet">
    <!-- CSS of sb-admin templates -->
    <link href="../../css/sb-admin.css" rel="stylesheet">
    <!-- Morris Charts CSS -->
    <link href="../../css/plugins/morris.css" rel="stylesheet">
	
    <script src="../../js/ie-emulation-modes-warning.js"></script>	

  </head>

  <body style="background-color: #F6F6F6" 
   onload="generateMorrisDonut_General(); generateMorrisDonut_Hyper(); generateMorrisDonut_Diab()">

	<!-- Header -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid" style="background-color: #FFF">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
		  <img style="float:left; padding-top:5px; margin-right:20px" src="../../img/logo.png" height="15%" width="15%">
          <a class="navbar-brand">Healsis</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
			<a href="../../index.html" type="button" class="btn btn-sm btn-default"  
			 style="font-size:14px; padding-left:15px; padding-right:15px; margin-top:10px; margin-right:20px; float:right">Logout</a>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
	    
		<!-- Navigation Bar -->
		<div class="col-sm-3 col-md-2 sidebar">
		  <div class="nav-sidebar-subtitle">Data Base</div>  
          <ul class="nav nav-sidebar">
            <li><a href="../dashboard.html">Client Data Inquiry</a></li>
            <li><a href="patient_data_update.html">Client Data Update</a></li>
            <li class="selected"><a href="neighbor_stat.html">Neighborhood Statistics</a></li>
            <li><a href="staff_contact.html">Staff Contact Info</a></li>
			<li><a href="my_profile.html">My Profile</a></li>
          </ul>
		  <div class="nav-sidebar-subtitle">Task Center</div> 
          <ul class="nav nav-sidebar">
            <li><a href="assign_tasks.html">Assgin Tasks</a></li>
            <li><a href="my_tasks.html">My Tasks</a></li>
            <li><a href="generate_reg.html">Generate Reg Key</a></li>
          </ul>
		  <div class="nav-sidebar-subtitle">Personal Health</div>
          <ul class="nav nav-sidebar">
            <li><a href="http://52.91.195.128:8000/nanohealth/">My H-Graph</a></li>
          </ul>
        </div>
		
		<!-- Main Frame -->
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h1 class="page-header">Neighborhood Statistics</h1>

		  <!-- Section Title --> 
          <h2 class="sub-header">General Health Condition (Good / Normal / Bad) by Locations</h2>
		  
		  <div class="row">

			<!-- Column 1/2 -->		  
			<div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title"><i class="fa fa-long-arrow-right"></i>Number of People in Different Conditions</h3>
					</div>
					<div class="panel-body">
						<div id="morris-donut-chart">
							<div id="MorrisDonutChart_General" style="height: 300px"></div>
						</div>
					</div>
				</div>
			</div>
					
			<!-- Column 2/2 -->
			<div class="col-md-4">
			  <div class="row">
				<label class="item-name col-md-5">Location</label>
				<select id="txtSel_Location_General" class="form-control select-list col-md-7" style="margin-right:30px"
				 onchange="updateMorrisDonut_General()">
					<option>Location</option>
					<option>FatehNagar</option>
					<option>RamakrishnaNagar</option>
					<option>Indiragandhipuram</option>
					<option>JanathaNagar</option>					
				</select>
			  </div>
			</div>
			
		  </div>
		  
		  <!-- Section Title --> 
      <h2 class="sub-header">Hypertension Condition (Yes / No) by Locations</h2>

		  <div class="row">

			<!-- Column 1/2 -->		  
			<div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title"><i class="fa fa-long-arrow-right"></i>Number of People in Different Conditions</h3>
					</div>
					<div class="panel-body">
						<div id="morris-donut-chart">
							<div id="MorrisDonutChart_Hyper" style="height: 300px"></div>
						</div>
					</div>
				</div>
			</div>
					
			<!-- Column 2/2 -->
			<div class="col-md-4">
			  <div class="row">
				<label class="item-name col-md-5">Location</label>
				<select id="txtSel_Location_Hyper" class="form-control select-list col-md-7" style="margin-right:30px"
				 onchange="updateMorrisDonut_Hyper()">
					<option>Location</option>
					<option>FatehNagar</option>
					<option>RamakrishnaNagar</option>
					<option>Indiragandhipuram</option>
					<option>JanathaNagar</option>					
				</select>
			  </div>
			</div>
			
		  </div>		  

		  <!-- Section Title --> 
          <h2 class="sub-header">Diabetes Condition (Yes / No) by Locations</h2>

		  <div class="row">

			<!-- Column 1/2 -->		  
			<div class="col-md-6">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title"><i class="fa fa-long-arrow-right"></i>Number of People in Different Conditions</h3>
					</div>
					<div class="panel-body">
						<div id="morris-donut-chart">
							<div id="MorrisDonutChart_Diab" style="height: 300px"></div>
						</div>
					</div>
				</div>
			</div>
					
			<!-- Column 2/2 -->
			<div class="col-md-4">
			  <div class="row">
				<label class="item-name col-md-5">Location</label>
				<select id="txtSel_Location_Diab" class="form-control select-list col-md-7" style="margin-right:30px"
				 onchange="updateMorrisDonut_Diab()">
					<option>Location</option>
					<option>FatehNagar</option>
					<option>RamakrishnaNagar</option>
					<option>Indiragandhipuram</option>
					<option>JanathaNagar</option>					
				</select>
			  </div>
			</div>
			
		  </div>		  
		  
        </div>
      </div>
    </div>

	<!-- Scripts are placed at the end of the document so the pages load faster -->
    <!-- Bootstrap core JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>

	<!-- jQuery -->
    <script src="../../js/jquery.js"></script>
	
	<!-- Morris Charts JavaScript -->
    <script src="../../js/plugins/morris/morris.js"></script>
    <script src="../../js/plugins/morris/morris.min.js"></script>
    <script src="../../js/plugins/morris/morris-data.js"></script>
    <script src="../../js/plugins/morris/raphael.min.js"></script>

    <!-- Flot Charts JavaScript -->
    <!--[if lte IE 8]><script src="js/excanvas.min.js"></script><![endif]-->
    <script src="../../js/plugins/flot/jquery.flot.js"></script>
    <script src="../../js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="../../js/plugins/flot/jquery.flot.resize.js"></script>
    <script src="../../js/plugins/flot/jquery.flot.pie.js"></script>
    <script src="../../js/plugins/flot/flot-data.js"></script>	


    <script>
      function updateMorrisDonut_General() {
        var jsonData;
        var patient_Location = document.getElementById("txtSel_Location_General").value;
        $.getJSON('../../json/neighbor_stat_general.json', function(data){        
          jsonData = data;
          for (var i = 0; i < jsonData.length; i++) {
            if (jsonData[i].patient_Location == patient_Location) {
              good_General = jsonData[i].good;
              normal_General = jsonData[i].normal;
              bad_General = jsonData[i].bad;
              break;
            }
          }
          // We didn't find the specific patientID in the list of all the patients
          if ((i==jsonData.length) && (jsonData[i-1].patient_Location!=patient_Location)) {
            alert ("This Location does not exist, please modify your input.");
          }
          //Erase all the contents in the div of the chart
          document.getElementById("MorrisDonutChart_General").innerHTML = "";
          generateMorrisDonut_General();
        })
      }
    </script>

    <script>
      function updateMorrisDonut_Hyper() {
        yes_Hyper = 0;
        no_Hyper = 0;
        var jsonData;
        var patient_Location = document.getElementById("txtSel_Location_Hyper").value;
        $.getJSON('../../json/patients_HScore.json', function(data){        
          jsonData = data;
          for (var i = 0; i < jsonData.length; i++) {
            if (jsonData[i].patient_Location == patient_Location) {
              if (jsonData[i].Hypertensive == "Y") {
                yes_Hyper += 1; }
              else {
                no_Hyper += 1; }
            }
          }
          //Erase all the contents in the div of the chart
          document.getElementById("MorrisDonutChart_Hyper").innerHTML = "";
          generateMorrisDonut_Hyper();
        })
      }
    </script>	

    <script>
      function updateMorrisDonut_Diab() {
        yes_Diab = 0;
        no_Diab = 0;
        var jsonData;
        var patient_Location = document.getElementById("txtSel_Location_Diab").value;
        $.getJSON('../../json/patients_HScore.json', function(data){        
          jsonData = data;
          for (var i = 0; i < jsonData.length; i++) {
            if (jsonData[i].patient_Location == patient_Location) {
              if (jsonData[i].Diabetic == "Y") {
                yes_Diab += 1; }
              else {
                no_Diab += 1; }
            }
          }
          //Erase all the contents in the div of the chart
          document.getElementById("MorrisDonutChart_Diab").innerHTML = "";
          generateMorrisDonut_Diab();
        })
      }
    </script>	
	
    <!-- Drawing the Charts -->
    <script>
      var good_General=0;
      var normal_General=0;
      var bad_General=0;
	    var Donut_General;
			
      var yes_Hyper=0;
      var no_Hyper=0;
	    var Donut_Hyper;
	  
      var yes_Diab=0;
      var no_Diab=0;
      var Donut_Diab=0;
    </script>
	
    <script>
      function generateMorrisDonut_General(){
        Donut_General = new Morris.Donut({
          element: 'MorrisDonutChart_General',
          data: [
            {label: "Good Condition", value: good_General},
            {label: "Normal Condition", value: normal_General},
            {label: "Bad Condition", value: bad_General}
          ]
        });
      }
    </script>
    <script>
      function generateMorrisDonut_Hyper(){
        Donut_Hyper = new Morris.Donut({
          element: 'MorrisDonutChart_Hyper',
          data: [
            {label: "Yes", value: yes_Hyper},
            {label: "No", value: no_Hyper}
          ]
        });
      }
    </script>
    <script>
      function generateMorrisDonut_Diab(){
        Donut_Diab = new Morris.Donut({
          element: 'MorrisDonutChart_Diab',
          data: [
            {label: "Yes", value: yes_Diab},
            {label: "No", value: no_Diab}
          ]
        });
      }
    </script>
	
  </body>
</html>
