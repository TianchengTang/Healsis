<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="icon" href="../img/logos/3.ico">

    <title>Dashboard</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- CSS of sb-admin templates -->
    <link href="../css/sb-admin.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="../css/dashboard.css" rel="stylesheet">

  </head>

  <body style="background-color: #F6F6F6">

    <!-- Header -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid" style="background-color: #FFF">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
		  <img style="float:left; padding-top:5px; margin-right:20px" src="../img/logo.png" height="15%" width="15%">
          <a class="navbar-brand">Healsis</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
			<a href="../index.html" type="button" class="btn btn-sm btn-default"  
			 style="font-size:14px; padding-left:15px; padding-right:15px; margin-top:10px; margin-right:20px; float:right">Logout</a>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
	    
		<!-- Navigation Bar -->
		<div class="col-sm-3 col-md-2 sidebar">
		  <div class="nav-sidebar-subtitle">Data Base</div>  
          <ul class="nav nav-sidebar">
            <li class="selected"><a href="dashboard.html">Client Data Inquiry</a></li>
            <li><a href="dashboard_sub_pages/patient_data_update.html">Client Data Update</a></li>
            <li><a href="dashboard_sub_pages/neighbor_stat.html">Neighborhood Statistics</a></li>
            <li><a href="dashboard_sub_pages/staff_contact.html">Staff Contact Info</a></li>
			<li><a href="dashboard_sub_pages/my_profile.html">My Profile</a></li>
          </ul>
		  <div class="nav-sidebar-subtitle">Task Center</div> 
          <ul class="nav nav-sidebar">
            <li><a href="dashboard_sub_pages/assign_tasks.html">Assgin Tasks</a></li>
            <li><a href="dashboard_sub_pages/my_tasks.html">My Tasks</a></li>
            <li><a href="dashboard_sub_pages/generate_reg.html">Generate Reg Key</a></li>
          </ul>
		  <div class="nav-sidebar-subtitle">Personal Health</div>
          <ul class="nav nav-sidebar">
            <li><a href="#">My H-Graph</a></li>
          </ul>
        </div>
		
		<!-- Main Frame -->
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h1 class="page-header">Client Data Inquiry</h1>

		  <!-- Section Title -->
          <!-- <h2 class="sub-header">Section title</h2> -->
		  
		  <div class="row">
		  
		    <!-- Input Column 1/2 -->
		    <div class="col-md-5">			
			  <div class="row">
				<label class="item-name col-md-5">Patient ID</label>
				<input id="txtFd_PatientID" class="form-control input-field col-md-7">
			  </div>
			  <div class="row">
				<label class="item-name col-md-5">Area</label>
				<select id="txtSel_Area" class="form-control select-list col-md-7">
					<option>Area 1</option>
					<option>Area 2</option>
					<option>Area 3</option>
				</select>
              </div>
			  <div class="row">
				<label class="item-name col-md-5">Location</label>
				<select id="txtSel_Location" class="form-control select-list col-md-7">
					<option>Location 1</option>
					<option>Location 2</option>
					<option>Location 3</option>
					<option>Location 4</option>
					<option>Location 5</option>					
				</select>
              </div>
			  <div class="row">
				<label class="item-name col-md-5">Last Visit After</label>
				<input id="txtFd_LastVisitAfter" class="form-control input-field col-md-7" placeholder=" mm/dd/yy">
              </div>
			  <div class="row">
				<label class="item-name col-md-5">Last Visit Before</label>
				<input id="txtFd_LastVisitBefore" class="form-control input-field col-md-7" placeholder=" mm/dd/yy">
              </div>			  
			</div>
			
			<!-- Input Column 2/2 -->
		    <div class="col-md-5">
			  <div class="row">
				<label class="item-name col-md-5">Hypertension</label>
				<select id="txtSel_Hypertension" class="form-control select-list col-md-7">
					<option>Yes</option>
					<option>No</option>
				</select>
              </div>

			  <div class="row">
				<label class="item-name col-md-5">Diabetes</label>
				<select id="Diabetes" class="form-control select-list col-md-7">
					<option>Yes</option>
					<option>No</option>
				</select>
              </div>
			</div>	
			
		  </div>
		  
		  <!-- center aligning has no effect if the width property is not set or set to 100% -->
		  <div id="btn_SearchPatients" class="row" style="margin:auto; width:30%; margin-top:5px">
			<button type="button" class="btn btn-sm btn-default btn-big" onclick="clickSearchPatients()">Search</button>
		  </div>
		  
		  <!-- Table of Searching Results -->
          <div class="table-responsive" style="margin-top:30px">
            <table class="table table-striped">
              <thead>
				<tr>
					<th>Patient ID</th>
					<th>Gender</th>
					<th>Age</th>
					<th>Location</th>
					<th>Area</th>
					<th>City</th>
					<th>Hypertension</th>
					<th>Blood Pressure</th>
					<th>Blood Sugar</th>			
					<th>Diabetes</th>
					<th>Urination Count</th>
					<th>Dry Tongue</th>
				</tr>
              </thead>
              <tbody>
                <tr>
                  <td id="table_Row1_PatientID"></td>
                  <td id="table_Row1_Gender"></td>
                  <td id="table_Row1_Age"></td>
				  <td id="table_Row1_Location"></td>
				  <td id="table_Row1_Area"></td>
				  <td id="table_Row1_City"></td>
				  <td id="table_Row1_Hypertension"></td>
				  <td id="table_Row1_BldPressure"></td>
				  <td id="table_Row1_BldSugar"></td>
				  <td id="table_Row1_Diabetes"></td>
				  <td id="table_Row1_UriCount"></td>
				  <td id="table_Row1_DryTongue"></td>
                </tr>
                <!--
				<tr>
                  <td>p1829881</td>
                  <td></td>
                  <td></td>
                </tr> -->

              </tbody>
            </table>
          </div>

		  <!-- center aligning has no effect if the width property is not set or set to 100% -->
		  <div class="row" style="margin:auto; width:30%; margin-top:5px; margin-bottom:20px">
			<button type="button" class="btn btn-sm btn-default btn-big" onclick="clickShowMoreDetails()">Show More Details</button>
		  </div>

		  <div class="row" style="margin-top:20px; margin-bottom:20px">
			<label id="lbl_DetailPatientInfo" style="background-color:white; font-weight:normal"></label>
		  </div>
		  
        </div>
      </div>
    </div>


	<!-- Scripts are placed at the end of the document so the pages load faster -->
	<!-- ================================================================================================================================== -->
    <!-- Bootstrap core JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
	
	<script>
		function loadJsonFile(patientID) {

			var jsonData;
			$.getJSON('../json/patients.json', function(data){
				jsonData = data;
			    for (var i = 0; i < jsonData.length; i++) {	
			    	if (jsonData[i].ptnt_rgstrtn_id_tmp == patientID) {
						document.getElementById("table_Row1_PatientID").innerHTML = jsonData[i].ptnt_rgstrtn_id_tmp;
						document.getElementById("table_Row1_Gender").innerHTML = jsonData[i].gndr;
						document.getElementById("table_Row1_Age").innerHTML = jsonData[i].dob;
						document.getElementById("table_Row1_Location").innerHTML = jsonData[i].patient_Location;
						document.getElementById("table_Row1_Area").innerHTML = jsonData[i].patient_Area;
						document.getElementById("table_Row1_City").innerHTML = jsonData[i].City;
						document.getElementById("table_Row1_Hypertension").innerHTML = jsonData[i].Hypertensive;
						document.getElementById("table_Row1_BldPressure").innerHTML =
							"High: " + jsonData[i].bp_systlc + "; Low: " + jsonData[i].bp_dstlc;
						document.getElementById("table_Row1_BldSugar").innerHTML = jsonData[i].bld_sgr;
						document.getElementById("table_Row1_Diabetes").innerHTML = jsonData[i].Diabetic;
						document.getElementById("table_Row1_UriCount").innerHTML = jsonData[i].UrinationCount;
						document.getElementById("table_Row1_DryTongue").innerHTML = jsonData[i].Dry_Tongue;

			    		break;
			    	}
			    }
			    // We didn't find the specific patientID in the list of all the patients
			    if ((i==jsonData.length) && (jsonData[i-1].ptnt_rgstrtn_id_tmp!=patientID)) {
			    	alert ("This patient does not exist, please modify your input.");
			    }
			});
		}
	</script>

	<script>
		function clickSearchPatients() {
			var patientID = document.getElementById("txtFd_PatientID").value;
			var area = document.getElementById("txtSel_Area").value;
			var location = document.getElementById("txtSel_Location").value;
			<!--var lastVisitAfter = document.getElementById("txtFd_lastVisitAfter").value;
			<!--var lastVisitBefore = document.getElementById("txtFd_lastVisitBefore").value;
			
			loadJsonFile(patientID);
			}
	</script>

	<script>
		function clickShowMoreDetails() {
			var patientID = document.getElementById("txtFd_PatientID").value;
			var jsonData;
			$.getJSON('../json/patients.json', function(data){
				jsonData = data;

			    for (var i = 0; i < jsonData.length; i++) {	
			    	if (jsonData[i].ptnt_rgstrtn_id_tmp == patientID) {
						// JSON.stringify() - Display all the info of a patient in a string
						var detailInfo = "Complete infomation of this patient: <br />" + JSON.stringify(jsonData[i]);
						document.getElementById("lbl_DetailPatientInfo").innerHTML = detailInfo;							
			    		break;
			    	}
			    }
			    // We didn't find the specific patientID in the list of all the patients
			    if ((i==jsonData.length) && (jsonData[i-1].ptnt_rgstrtn_id_tmp!=patientID)) {
			    	alert ("This patient does not exist, please modify your input.");		
				}
			});
		}
	</script>
	
  </body>
</html>
